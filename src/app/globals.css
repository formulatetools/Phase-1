@import "tailwindcss";
@plugin "@tailwindcss/typography";

@custom-variant dark (&:where(.dark, .dark *));

@theme inline {
  --color-background: #fafaf8;
  --color-foreground: #2d2d2d;
  --color-surface: #ffffff;

  /* Warm charcoal UI primary palette */
  --color-primary-50: #fafaf8;
  --color-primary-100: #f1f0ee;
  --color-primary-200: #e8e8e6;
  --color-primary-300: #d4d4d0;
  --color-primary-400: #999;
  --color-primary-500: #888;
  --color-primary-600: #666;
  --color-primary-700: #444;
  --color-primary-800: #2d2d2d;
  --color-primary-900: #1a1a1a;
  --color-primary-950: #111;

  /* Teal accent (retained for success / secondary) */
  --color-accent-50: #e8f5e9;
  --color-accent-100: #c8e6c9;
  --color-accent-200: #a5d6a7;
  --color-accent-300: #81c784;
  --color-accent-400: #66bb6a;
  --color-accent-500: #16a34a;
  --color-accent-600: #2e7d32;
  --color-accent-700: #1b5e20;
  --color-accent-800: #145218;
  --color-accent-900: #0d3b10;

  /* Brand amber */
  --color-brand: #e4a930;
  --color-brand-light: #fdf6e3;
  --color-brand-dark: #c48d1e;
  --color-brand-text: #9a6e15;

  /* Semantic */
  --color-success: #16a34a;
  --color-warning: #e4a930;
  --color-danger: #dc2626;

  --font-sans: var(--font-dm-sans);
}

/* ── Dark mode variable overrides ─────────────────────────── */
.dark {
  --color-background: #1a1a1a;
  --color-foreground: #e2e8f0;
  --color-surface: #1e293b;

  /* Inverted primary scale — warm slate tones */
  --color-primary-50: #1e293b;
  --color-primary-100: #253349;
  --color-primary-200: #334155;
  --color-primary-300: #475569;
  --color-primary-400: #94a3b8;
  --color-primary-500: #94a3b8;
  --color-primary-600: #cbd5e1;
  --color-primary-700: #e2e8f0;
  --color-primary-800: #e2e8f0;
  --color-primary-900: #f1f5f9;
  --color-primary-950: #f8fafc;

  /* Accent — lighter greens for dark contrast */
  --color-accent-50: #0d3b10;
  --color-accent-100: #145218;
  --color-accent-200: #1b5e20;
  --color-accent-300: #2e7d32;
  --color-accent-400: #4ade80;
  --color-accent-500: #4ade80;
  --color-accent-600: #86efac;
  --color-accent-700: #bbf7d0;

  /* Brand amber stays vibrant — 7.3:1 on slate = AAA */
  --color-brand: #e4a930;
  --color-brand-light: #253349;
  --color-brand-dark: #fbbf24;
  --color-brand-text: #fbbf24;

  /* Semantic — lighter for dark backgrounds */
  --color-success: #4ade80;
  --color-warning: #fbbf24;
  --color-danger: #f87171;

  /* ── Default palette overrides (mirror light↔dark ends) ── */

  /* Green — success states, active badges */
  --color-green-50: #052e16;
  --color-green-100: #14532d;
  --color-green-200: #166534;
  --color-green-300: #15803d;
  --color-green-600: #4ade80;
  --color-green-700: #86efac;
  --color-green-800: #bbf7d0;

  /* Red — error states, destructive actions */
  --color-red-50: #450a0a;
  --color-red-100: #7f1d1d;
  --color-red-200: #991b1b;
  --color-red-300: #b91c1c;
  --color-red-500: #f87171;
  --color-red-600: #fca5a5;
  --color-red-700: #fecaca;
  --color-red-800: #fee2e2;

  /* Blue — info badges, link-like states */
  --color-blue-50: #172554;
  --color-blue-100: #1e3a8a;
  --color-blue-200: #1e40af;
  --color-blue-600: #93c5fd;
  --color-blue-700: #bfdbfe;

  /* Amber — warnings, pending states */
  --color-amber-50: #451a03;
  --color-amber-100: #78350f;
  --color-amber-200: #92400e;
  --color-amber-300: #b45309;
  --color-amber-400: #fbbf24;
  --color-amber-600: #fcd34d;
  --color-amber-700: #fde68a;
  --color-amber-800: #fef3c7;
}

body {
  background: var(--color-background);
  color: var(--color-foreground);
}

/* Hide scrollbar for cleaner mobile tab scrolling */
.scrollbar-hide {
  -ms-overflow-style: none;
  scrollbar-width: none;
}
.scrollbar-hide::-webkit-scrollbar {
  display: none;
}

/* Focus ring utility — amber at low opacity */
input:focus,
textarea:focus,
select:focus {
  border-color: #e4a930 !important;
  box-shadow: 0 0 0 3px rgba(228, 169, 48, 0.15) !important;
  outline: none !important;
}

/* Force light mode for print */
@media print {
  :root {
    --color-background: #fafaf8 !important;
    --color-foreground: #2d2d2d !important;
    --color-surface: #ffffff !important;
    --color-primary-50: #fafaf8 !important;
    --color-primary-100: #f1f0ee !important;
    --color-primary-200: #e8e8e6 !important;
    --color-primary-800: #2d2d2d !important;
    --color-primary-900: #1a1a1a !important;
  }

  body {
    background: white !important;
    color: black;
    font-size: 11pt;
  }

  /* Page setup — 20mm left for NHS hole-punch */
  @page {
    margin: 15mm 15mm 12mm 20mm;
    size: A4;
  }

  /* Hide non-content elements */
  nav,
  header,
  footer,
  .no-print,
  button {
    display: none !important;
  }

  .print-only {
    display: block !important;
  }

  /* Worksheet table styling for print */
  table {
    border-collapse: collapse;
    width: 100%;
  }

  th,
  td {
    border: 1px solid #ccc;
    padding: 6px 8px;
    text-align: left;
    font-size: 9pt;
  }

  th {
    background: #f5f5f5 !important;
    font-weight: 600;
    -webkit-print-color-adjust: exact;
    print-color-adjust: exact;
  }

  /* Ensure inputs show their values */
  input,
  textarea,
  select {
    border: 1px solid #ccc !important;
    padding: 4px !important;
    background: white !important;
    box-shadow: none !important;
  }

  /* Expand textareas for write-in space */
  textarea {
    min-height: 60px;
  }

  /* Page break management */
  section {
    page-break-inside: avoid;
  }

  h3 {
    page-break-after: avoid;
  }

  /* Preserve colours for domain coding, computed fields, badges */
  [style*="background"],
  [style*="border-color"],
  .bg-amber-50,
  .border-amber-400,
  .bg-red-600,
  .bg-primary-800,
  .bg-green-50,
  .bg-red-50,
  .bg-blue-50 {
    -webkit-print-color-adjust: exact;
    print-color-adjust: exact;
  }

  /* Reduce border radius for print */
  .rounded-xl,
  .rounded-2xl {
    border-radius: 8px !important;
  }

  .rounded-lg {
    border-radius: 6px !important;
  }

  /* Remove shadows */
  .shadow-sm,
  .shadow {
    box-shadow: none !important;
  }

  /* Formulation diagrams should not split across pages */
  [class*="grid-cols-3"],
  [class*="grid-cols-2"] {
    page-break-inside: avoid;
  }
}
